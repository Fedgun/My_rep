# ORDER BY
*Когда мы говорили о последовательности столбцов в выводе, вы, вероятно, задались вопросом: «А в каком порядке выводятся строки?»*

*Порядок вывода строк может задаваться в настройках базы данных для каждой таблицы. Более того, этот порядок может быть не задан, и тогда от вывода к выводу он будет разным.*

*Чтобы задать порядок вывода строк в запросе, применим новое ключевое слово ORDER BY.*

*Для примера отсортируем фильмы по их названию в алфавитном порядке.*

**SELECT *
FROM sql.kinopoisk
ORDER BY movie_title**

*Как видите, сортировка по возрастанию проводится по умолчанию.*

*Наш запрос с сортировкой по названию аналогичен такому:*

**SELECT *
FROM sql.kinopoisk
ORDER BY rating ASC**

***Здесь ASC — явное указание порядка сортировки по возрастанию (англ. ascending).***

***Для обратного порядка используется ключевое слово DESC (англ. descending).***

*Выведем названия, имена режиссёров и сценаристов, а также год выхода в прокат фильмов, выпущенных в СССР, и отсортируем результат по убыванию рейтинга.*

**SELECT
    movie_title,
    director,
    screenwriter,
    year
FROM sql.kinopoisk
WHERE country = 'СССР'
ORDER BY rating DESC**

***Обратите внимание! Ключевое слово ORDER BY идёт после применения всех условий в WHERE.***

*Также в ORDER BY можно указывать, где должны идти пустые значения — в начале или в конце.*

*Такая настройка порядка вывода задаётся с помощью ключевых слов NULLS FIRST / NULLS LAST.*

**SELECT
    movie_title,
    rating,
    overview,
    year
FROM sql.kinopoisk
ORDER BY overview**

*А теперь измените последнюю строку скрипта на ORDER BY overview NULLS FIRST.*

*Такой запрос выведет первыми строки с пустым описанием.*

***Вы можете сортировать вывод по нескольким столбцам, просто указав их через запятую в ORDER BY (порядок сортировки указывается отдельно для каждого столбца).***

*Кроме того, вы можете сортировать результат запроса и по тем столбцам, которых нет в выводе.*

*Получили список всех режиссёров и фильмов из ТОП-250, отсортированных по году выхода в прокат, а внутри года — по рейтингу в порядке убывания.*

**SELECT
    director,
    movie_title
FROM sql.kinopoisk
ORDER BY year, rating DESC**


*Напишите запрос, чтобы вывести названия всех фильмов (столбец Название фильма), у которых рейтинг выше 8.3 и страна производства — Франция. Отсортируйте по рейтингу в порядке убывания, далее — по году выхода в прокат (также в порядке убывания).*

**SELECT
    movie_title AS "Название фильма"
FROM sql.kinopoisk
WHERE rating > 8.3
    AND country = 'Франция'
ORDER BY rating DESC, year DESC**

***Для упрощения работы с ORDER BY можно использовать не названия столбцов, а их номера из вывода.***

**SELECT
    director,
    movie_title,
    year
FROM sql.kinopoisk
ORDER BY 1, 3 DESC**

***Сортировку по номеру столбца стоит использовать с осторожностью, поскольку при изменении вывода в SELECT всё может сбиться.***

***При добавлении новых столбцов в SELECT нужно проверить и при необходимости поправить номера столбцов в ORDER BY.***